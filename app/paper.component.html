<input id="raw-input" #mainFocus (keydown)="keyInput($event)" [(ngModel)]="rawStrings[lineIndex]"  />
<div id="scribed">

    <div class="pretty">
        <div *ngFor="let markedString of markedStrings; let line = index"
            myMathJax
            class="line-arithmetic"
            [ngClass]="setLineClass(line)"
            [(mathString)]="markedStrings[line]">
        </div>
    </div>

    <div class="nav-buttons">
        <button (click)="markMove(-1)" [disabled]="rawStrings[lineIndex] == ''">&#x2190;</button>
        <button (click)="markMove(+1)" [disabled]="rawStrings[lineIndex] == ''">&#x2192;</button>
        <!-- <button (click)="stretchMarked(+1)" [disabled]="rawStrings[lineIndex] == ''">&#x21c9;</button> -->
        <button (click)="remove()" [disabled]="rawStrings[lineIndex] == ''">&#x232b;</button>
        <button (click)="crossout()" [disabled]="rawStrings[lineIndex] == ''"><del>100</del></button> 
        <button (click)="newCopy()" [disabled]="rawStrings[lineIndex] == ''">new copy</button>
        <button (click)="paste()" [disabled]="chosen == ''">paste: {{chosen}}</button> 
        <button (click)="undo()">Undo</button>
        <button (click)="clear(handwriting)" [disabled]="rawStrings[lineIndex] == ''">Clear</button>
        <button (click)="vertical(-1)" [disabled]="lineIndex<=0">&#x2b06;</button> 
        <button (click)="vertical(+1)" [disabled]="lineIndex >= rawStrings.length-1">&#x2b07;</button> 

    </div>
</div>
<div>
    <div id="operator-controls">
        <button (click)="addSymbol('+')" ><span class="display-symbol">+</span><span *ngIf="keystrokeTranslate" class="hotkey">p</span></button> 
        <button (click)="addSymbol('-')" ><span class="display-symbol">-</span><span *ngIf="keystrokeTranslate" class="hotkey">m</span></button> 
        <button (click)="addSymbol('xx')" ><span class="display-symbol">x</span><span *ngIf="keystrokeTranslate" class="hotkey">t</span></button> 
        <button (click)="addSymbol('/')" ><span class="display-symbol">/</span><span *ngIf="keystrokeTranslate" class="hotkey">d</span></button> 
        <button (click)="addSymbol('=')" ><span class="display-symbol">=</span><span *ngIf="keystrokeTranslate" class="hotkey">e</span></button> 
        <button (click)="addSymbol('(')" ><span class="display-symbol">(</span><span *ngIf="keystrokeTranslate" class="hotkey">o</span></button> 
        <button (click)="addSymbol(')')" ><span class="display-symbol">)</span><span *ngIf="keystrokeTranslate" class="hotkey">c</span></button> 
        <button (click)="addSymbol(' ')" ><span class="display-symbol">space</span><span *ngIf="keystrokeTranslate" class="hotkey">space</span></button>
        <button (click)="addSymbol('^')" ><span class="display-symbol">y &#x02e3;</span><span *ngIf="keystrokeTranslate" class="hotkey">u</span></button> 
        <button (click)="addSymbol('sqrt')" ><span class="display-symbol">&#x221a;</span><span *ngIf="keystrokeTranslate" class="hotkey">r</span></button> 
        <button (click)="addSymbol('x')" ><span class="display-symbol">ùë•</span><span *ngIf="keystrokeTranslate" class="hotkey">x</span></button> 
        <button (click)="addSymbol('y')" ><span class="display-symbol">ùë¶</span><span *ngIf="keystrokeTranslate" class="hotkey">y</span></button> 
        <button (click)="keystrokeTranslate = ! keystrokeTranslate">Translate Keys</button> 
        
        <div id="number-controls">
            <button (click)="addSymbol('.')" >.</button>
            <button (click)="addSymbol('0')" >0</button> 
            <button (click)="addSymbol('1')" >1</button> 
            <button (click)="addSymbol('2')" >2</button> 
            <button (click)="addSymbol('3')" >3</button> 
            <button (click)="addSymbol('4')" >4</button> 
            <button (click)="addSymbol('5')" >5</button> 
            <button (click)="addSymbol('6')" >6</button> 
            <button (click)="addSymbol('7')" >7</button> 
            <button (click)="addSymbol('8')" >8</button> 
            <button (click)="addSymbol('9')" >9</button> 
            <button (click)="enter()" >Enter</button> 
        </div>
    </div>
    <canvas myWriting id="hand-canvas"></canvas>
    <img id="hand-img"/>

    <div id="hand-controls">

        <input id="marked-input" [ngModel]="markedStrings[lineIndex]"  />

        <div id="tokens" round-scroller>
            <div *ngFor="let token of tokens ;let i = index"
                    class="carousel"
                    [attr.id]="'term-' + i"
                    [ngClass]="{'term-selected': i == carouselPick}">
                `{{token.term}}`
            </div>
        </div>
    </div>
</div>
