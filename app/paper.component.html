<div>
    <div id="operator-controls">
        <button (click)="addSymbol('+')" >+</button> 
        <button (click)="addSymbol('-')" >-</button> 
        <button (click)="addSymbol('xx')" >x</button> 
        <button (click)="addSymbol('/')" >/</button> 
        <button (click)="addSymbol('=')" >=</button> 
        <button (click)="addSymbol('(')" >(</button> 
        <button (click)="addSymbol(')')" >)</button> 
        <button (click)="addSymbol(' ')" >&#x2423;</button>
        <button (click)="addSymbol('^')" >y &#x02e3;</button> 
        <button (click)="addSymbol('sqrt')" >&#x221a;</button> 
        <button (click)="addSymbol('x')" >ùë•</button> 
        <button (click)="addSymbol('y')" >ùë¶</button> 
        
        <div id="number-controls">
            <button (click)="addSymbol('.')" >.</button>
            <button (click)="addSymbol('0')" >0</button> 
            <button (click)="addSymbol('1')" >1</button> 
            <button (click)="addSymbol('2')" >2</button> 
            <button (click)="addSymbol('3')" >3</button> 
            <button (click)="addSymbol('4')" >4</button> 
            <button (click)="addSymbol('5')" >5</button> 
            <button (click)="addSymbol('6')" >6</button> 
            <button (click)="addSymbol('7')" >7</button> 
            <button (click)="addSymbol('8')" >8</button> 
            <button (click)="addSymbol('9')" >9</button> 
            <button (click)="enter()" >Enter</button> 
        </div>
    </div>
    <canvas myWriting id="hand-canvas"></canvas>
    <img id="hand-img"/>
    <div id="scribed">
        <div>
            <button (click)="carouselMove(-1)" *ngIf="rawStrings[lineIndex] != ''">&#x2b05;</button>
            <button (click)="carouselMove(+1)" *ngIf="rawStrings[lineIndex] != ''">&#x2b95;</button>
            <button (click)="stretchRight(+1)" *ngIf="rawStrings[lineIndex] != ''">&#x21c0;</button>
            <button (click)="crossout()" *ngIf="rawStrings[lineIndex] != ''"><del>100</del></button> 
            <button (click)="remove()" *ngIf="rawStrings[lineIndex] != ''">remove</button>
            <button (click)="newCopy()" *ngIf="rawStrings[lineIndex] != ''">new copy</button>
            <button (click)="paste()" *ngIf="chosen != ''">paste: {{chosen}}</button> 
            <button (click)="vertical(-1)"
                    [disabled]="lineIndex<=0">&#x2b06;</button> 
            <button (click)="vertical(+1)"
                    [disabled]="lineIndex >= rawStrings.length-1">&#x2b07;</button> 
            <div class="pretty">
                <div *ngFor="let rawString of rawStrings; let line = index"
                    myMathJax
                    class="line-arithmetic"
                    [ngClass]="{'line-selected': line == lineIndex}"
                    [(mathString)]="rawStrings[line]">
                </div>
            </div>
        </div>
    </div>

    <div id="hand-controls">
        <button (click)="correct(handwriting)">Wrong</button>
        <button (click)="clear(handwriting)">Clear</button>
        <input id="raw-input" (keyup)="tokenise(rawStrings[lineIndex])" [(ngModel)]="rawStrings[lineIndex]"  />
            <div id="tokens" round-scroller>
                <div *ngFor="let token of tokens ;let i = index"
                        class="carousel"
                        [attr.id]="'term-' + i"
                        [ngClass]="{'term-selected': i == carouselPick}">
                    `{{token.term}}`
                </div>
            </div>
    </div>
</div>
